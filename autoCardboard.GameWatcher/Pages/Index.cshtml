@page
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>

<script type="text/ecmascript">
    var mqtt;
    var reconnectTimeout = 2000;
    var host = "localhost";
    var port = 1884;

    function onConnect() {
        console.log("Connected to game message server");
        mqtt.subscribe("AutoCardboard");
    }

    function onMessageArrived(msg)
    {
      console.log("got message : " + msg);
    }

    function MQTTconnect()
    {
        mqtt = new Paho.MQTT.Client(host, port, "42");

        var options = { timeout:3, onSuccess: onConnect };

        mqtt.onMessageArrived = onMessageArrived;
        mqtt.connect(options);
    }
</script>

<div class="row">
    <div class="col-6">
        <ul id="messagesList"></ul>
    </div>
</div>
<script>
    MQTTconnect();
</script>

@*// https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js*@
@*http://www.steves-internet-guide.com/using-javascript-mqtt-client-websockets/*@

